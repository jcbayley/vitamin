<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Run Your Own Analysis from Start to Finish &mdash; vitamin 0.3.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Customizing Your Parameters Files" href="parameters_files.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> vitamin
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run Your Own Analysis from Start to Finish</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters_files.html">Customizing Your Parameters Files</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">vitamin</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Run Your Own Analysis from Start to Finish</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/vitamin_start_to_finish.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="run-your-own-analysis-from-start-to-finish">
<h1>Run Your Own Analysis from Start to Finish<a class="headerlink" href="#run-your-own-analysis-from-start-to-finish" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>Start an ipython notebook (or Google Colab)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ipython3
</pre></div>
</div>
<p>Import vitamin</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>import vitamin
</pre></div>
</div>
<p>You will notice that three json files have now appeared in your repository (under dictionary params_files).
These are the default parameter files which vitamin will use to run. Feel
free to edit these files as you wish. More documentation on customizing your
run can be found here. (need to provide link to parameters documentation).</p>
<p>We will now generate some training data using the default hyperparameters.
The code will generate 1000 timeseries by default, but it is recommended to use
at least 1 million for ideal convergence.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.gen_train<span class="o">()</span>
</pre></div>
</div>
<p>You may use your own customized parameter files by inserting full paths
to the text files in any of the run_vitamin function like so:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time to run gen_train(): ~(30 mins - 1 hr)</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.gen_train<span class="o">(</span><span class="nv">params</span><span class="o">=</span><span class="s1">&#39;params.txt&#39;</span>,bounds<span class="o">=</span><span class="s1">&#39;bounds.txt&#39;</span>,fixed_vals<span class="o">=</span><span class="s1">&#39;fixed_vals.txt&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Now generate test timeseries. By default vitamin does not produce Bayesian posteriors for each of these
timeseries, but you may turn this functionality on by setting <cite>do_pe=True</cite> in the params.json file will.
Vitamin uses the dynesty sampler by default with 1000 live points
and a dlogz of 0.1.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.gen_test<span class="o">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time to run gen_test(): A few hours depending on hardware.</p>
</div>
<p>We are ready to start training our network. To do so, simply run the command
below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.train<span class="o">()</span>
</pre></div>
</div>
<p>By default, the code will run for 1,000,000 iterations (saving the model and making plots
every 50,000 iterations). It is recommended to have the code run for at least a few 100 thousand
iterations (depending on you batch size).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time to run train(): Will take several hours to run all the way through depending on hardware. Estimate is made using an Nvidia V100 GPU.</p>
</div>
<p>To resume training from the last saved checkpoint, simply set the resume_training
option in train() to True.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.train<span class="o">(</span><span class="nv">resume_training</span><span class="o">=</span>True<span class="o">)</span>
</pre></div>
</div>
<p>Once your model has been fully trained, we can now produce final results plots. In order
to get the most use out of thse plots, it is recommended to produce test samples using more
than one sampler. However, by default vitamin will only use the Dynesty sampler.</p>
<p>The VItamin test() function will by default make corner plots (without sky map),
KL divergence plots between posteriors produced by other samplers and VItamin and PP plots.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run_vitamin.test<span class="o">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Time to run test(): ~1s per timeseries to make corner plot results. KL and PP plot will take a few minutes to generate if only using 4 test timeseries and 1 sampler. Time to generate KL and PP plots will increase as more test timeseries and samplers are added.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="parameters_files.html" class="btn btn-neutral float-right" title="Customizing Your Parameters Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Joseph Bayley.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>